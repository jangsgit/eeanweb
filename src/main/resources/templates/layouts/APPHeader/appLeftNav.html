<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <th:block layout:fragment="leftNavComm">
        <!----- hover scripts>script  서브메뉴위치    -->
        <ul class="pnav">
            <li>
                <button type="button"><img th:src="@{/assets/images/header_icon1.png}" alt=""></button>
                <div class="depth2">
                    <div class="dep_main">
                        <a href="./center.html">
                            <button type="button">
                                이인옵틱수주시스템
                            </button>
                        </a> 
                    </div> 
                    <ul>
                        <li><a th:href="@{/app01/index14}"><i><img class="dot1" th:src="@{/assets/images/i_dot_header.png}" alt=""><img class="dot2" th:src="@{/assets/images/i_dot_header2.png}" alt=""></i>간편주문</a></li>
                        <li><a th:href="@{/app01/index15}"><i><img class="dot1" th:src="@{/assets/images/i_dot_header.png}" alt=""><img class="dot2" th:src="@{/assets/images/i_dot_header2.png}" alt=""></i>일반주문</a></li>
                        <li><a th:href="@{/app01/index16}"><i><img class="dot1" th:src="@{/assets/images/i_dot_header.png}" alt=""><img class="dot2" th:src="@{/assets/images/i_dot_header2.png}" alt=""></i>주문현황</a></li>
                        <li><a th:href="@{/app01/index17}"><i><img class="dot1" th:src="@{/assets/images/i_dot_header.png}" alt=""><img class="dot2" th:src="@{/assets/images/i_dot_header2.png}" alt=""></i>예약현황</a></li>
                        <!-- <li><a th:href="@{/app01/index05}"><i><img class="dot1" th:src="@{/assets/images/i_dot_header.png}" alt=""><img class="dot2" th:src="@{/assets/images/i_dot_header2.png}" alt=""></i>예약주문등록</a></li> -->
                        <li><a th:href="@{/app01/index04}"><i><img class="dot1" th:src="@{/assets/images/i_dot_header.png}" alt=""><img class="dot2" th:src="@{/assets/images/i_dot_header2.png}" alt=""></i>재고등록</a></li>
                        <li><a th:href="@{/app01/index020}"><i><img class="dot1" th:src="@{/assets/images/i_dot_header.png}" alt=""><img class="dot2" th:src="@{/assets/images/i_dot_header2.png}" alt=""></i>거래처등록</a></li>
                    </ul>
                </div>     
            </li>
            <li>
                <button type="button"><img th:src="@{/assets/images/header_icon2.png}" alt=""></button>
                <div class="depth2 on">
                    <div class="dep_main">
                        <a href="">    
                            <button type="button">
                                통계관리
                            </button>
                        </a>
                    </div>


                    <ul>
                        <li><a th:href="@{/app01/index13}"><i><img class="dot1" src="/images/i_dot_header.png" alt=""><img class="dot2" src="/images/i_dot_header2.png" alt=""></i>재고수불현황</a></li>
                        <li><a th:href="@{/app01/index06}"><i><img class="dot1" src="/images/i_dot_header.png" alt=""><img class="dot2" src="/images/i_dot_header2.png" alt=""></i>사원매출현황</a></li>
                        <li><a th:href="@{/app01/index07}"><i><img class="dot1" src="/images/i_dot_header.png" alt=""><img class="dot2" src="/images/i_dot_header2.png" alt=""></i>거래처매출현황</a></li>
                        <li><a th:href="@{/app01/index08}"><i><img class="dot1" src="/images/i_dot_header.png" alt=""><img class="dot2" src="/images/i_dot_header2.png" alt=""></i>품목매출현황</a></li>
                        <li><a th:href="@{/app01/index09}"><i><img class="dot1" src="/images/i_dot_header.png" alt=""><img class="dot2" src="/images/i_dot_header2.png" alt=""></i>지역별매출현황</a></li>
                        <!--<li><a th:href="@{/app02/index10}"><i><img class="dot1" src="/images/i_dot_header.png" alt=""><img class="dot2" src="/images/i_dot_header2.png" alt=""></i>품목현황</a></li> -->
                        <li><a th:href="@{/app01/index11}"><i><img class="dot1" src="/images/i_dot_header.png" alt=""><img class="dot2" src="/images/i_dot_header2.png" alt=""></i>A/S접수/배송현황</a></li>
                        <!-- <li><a th:href="@{/app02/index12}"><i><img class="dot1" src="/images/i_dot_header.png" alt=""><img class="dot2" src="/images/i_dot_header2.png" alt=""></i>접수현황</a></li> -->
                    </ul>
                </div>
            </li> 
            <!-- <li>
                <button type="button"><img th:src="@{/assets/images/header_icon2.png}" alt=""></button>
                <div class="depth2 on">
                    <div class="dep_main">
                        <a href="">    
                            <button type="button">
                                거래처등록
                            </button>
                        </a>
                    </div>
                    <ul>
                        <li><a th:href="@{/app01/index020}"><i><img class="dot1" src="/images/i_dot_header.png" alt=""><img class="dot2" src="/images/i_dot_header2.png" alt=""></i>거래처등록</a></li>
                    </ul> 
                </div>
            </li>   -->
            <!-- <li>
                <button type="button"><img th:src="@{/assets/images/header_icon5.png}" alt=""></button>
                <div class="depth2 on">
                    <div class="dep_main"> 
                        <button id="userinfo">
                            사용자정보
                        </button> 
                    </div> 
                </div>
            </li> -->
            <li>
                <button type="button"><img th:src="@{/assets/images/check_on.png}" alt=""></button>
                <div class="depth2 on">
                    <div class="dep_main">   
                        <button id="logout" onclick="logout()">
                            로그아웃
                        </button>  
                    </div> 
                </div>
            </li> 
        </ul>
    </th:block>



    <input class="form-control form-control-sm"  type="hidden" id="userinfobtn" data-bs-toggle="modal" data-bs-target="#userinfomodal"  />

    <!--------------------------------------------------------------------------------------->
    <!-- 처리자 MODAL FROM  -->
    <!-- <form    th:object="${userformDto}" method="post" ></form>
        <div class="modal fade" id="userinfomodal" data-bs-keyboard="false"
            data-bs-backdrop="static" tabindex="-1" aria-labelledby="staticBackdropLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-lg mt-6" role="document" id = "modalForm01"
                style="max-width: 500px">
                <div class="modal-content border-0">
                    <div class="modal-body p-0" >
                        <div class="rounded-top-lg py-3 ps-4 pe-6 bg-light"> 
                            <label>비밀번호</label>
                            <input class="form-control form-control-sm" type="text"  th:value="${userformDto.passwd1}" id="actpasswdz" onchange="check_pw()">
                            <label>이름</label>
                            <input class="form-control form-control-sm" type="text"  th:value="${userformDto.username}" id="actnamez">
                            <label>핸드폰번호</label>
                            <input class="form-control form-control-sm" type="text"  th:value="${userformDto.phone}" id="actphonez">


                        </div>

                    </div>

                    <div class="modal-footer">
                        <div class="row g-1">
                            <div class="col-auto">
                                <button class="badge-soft-primary dropdown-item rounded-1"
                                        type="button"  id="wpernmmodal_btn2" data-bs-dismiss="modal" onclick="save_btn3()">수정</button>
                            </div>
                            <div class="col-auto">
                                <button class="badge-soft-primary dropdown-item rounded-1"
                                        type="button"  id="wpernmmodal_btn3" data-bs-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <input type="hidden"  name="actuseridz" id="actuseridz" th:value="${userformDto.userid}" >
    </form>    -->
    <!--------------------------------------------------------------------------------------->

    <script type="text/javascript" th:inline="javascript">
        //마이페이지 모달 호출
        // document.getElementById("userinfo").addEventListener("click",function() {
        //     document.getElementById("userinfobtn").click();

        // });


        function save_btn3(){
            var ls_passwd = document.getElementById('actpasswdz').value;
            var ls_name = document.getElementById('actnamez').value;
            var ls_phone = document.getElementById('actphonez').value;
            var ls_userid = document.getElementById('actuseridz').value;

            if(!ls_passwd){
                alert("공백은 불가합니다.")
                return
            }
            if(!ls_name){
                alert("공백은 불가합니다.")
                return
            }
            if(!ls_phone){
                alert("공백은 불가합니다.")
                return
            }

            $.ajax({
                url: '/authcrud/update',
                type: "POST",
                data: {
                    "passwd1" : ls_passwd,
                    "passwd2" : ls_passwd,
                    "phone" : ls_phone,
                    "username" : ls_name,
                    "userid" : ls_userid
                },
                async: false,
                success:function (data) {
                    alert("성공")
                },error:function (e) {
                    alert("오류발생");
                    console.log('error', e)
                }
            }).done(function(fragment){

            })


        }

        function check_pw(){
            var pw = document.getElementById('actpasswdz').value;

            const pattern_pwd = /(?=.*\d{1,20})(?=.*[~`!@#$%\^&*()-+=]{1,20})(?=.*[a-zA-Z]{1,20}).{8,20}$/;

            if(!(pattern_pwd.test(pw))){
                window.alert('영문+숫자+특수문자 조합으로 8자리 이상 비밀번호를 입력해주세요.');
                document.getElementById('actpasswdz').value="";
                document.getElementById('actpasswdz').focus();
            }
        }
 
        function logout(){   
            if (!confirm("로그아웃하시겠습니까?") ){
                return    
            }
            localStorage.removeItem("perid");
            localStorage.removeItem("pernm");
            localStorage.removeItem("userid");
            localStorage.removeItem("flag");
            localStorage.removeItem("custnm") ;
            location.href = "/" ;
        }   
    </script>


</html>
